# metaproxy-SUB
[Metaproxy](http://www.indexdata.com/metaproxy) configuration for SUB Göttingen.

2012-2013 by Sven-S. Porst, [SUB Göttingen](http://www.sub.uni-goettingen.de/) <[porst@sub.uni-goettingen.de](mailto:porst@sub.uni-goettingen.de)>.


## subfolders
* conf: files for configuration and setup
	* SUB.xml: main configuration loaded by the `metaproxy` command; includes:
	* zoom.xml: main configuration containing the database setup
	* dspace/: configuration files for serving data from DSpace’s Solr index
		* dspace-route.xml: Metaproxy route configuration
		* dspace.pqf: map SRU index names to Solr index names
		* dspace-pql-to-solr.xsl: map Z39.50 index numbers to Solr index names
		* dspace-to-marc21.xsl: convert Solr documents with DSpace’s extended DC-fields (and then some) to MARC
		* dspace-solr-to-dc.xsl: convert Solr documents from DSpace to the extended DC-format used by DSpace’s (unreliable) SRU interface add-on
	* zvdd/: configuration files for serving data from the ZVDD Solr index
		* zvdd-route.xml: Metaproxy route configuration
		* zvdd-add-iswork.xsl: add an extra condition to all queries
		* zvdd.pqf: map SRU index names to Solr index names
		* zvdd-pql-to-solr.xsl: map Z39.50 index numbers to Solr index names
		* zvdd-solr-to-mods.xsl: for extracting MODS data from a Solr field
		* zvdd-solr-to-mets.xsl: for fetching METS data based on the ID in a Solr field
		* test:
			* test-all.yaz-commands: commands for yaz-client to test all output formats
			* zvdd-solr.xml: example record
	* explain/: folder with explain responses; its content is generated by the create-explains.py script
		* explains.xml: type `sru_z3950` filter tag with explain responses for all databases; loaded into »config/SUB.xml« with XInclude
		* $DATABASE.xml: for each database $DATABASE the explain response
	* metaproxy.init: init script for SUSE Linux
	* metaproxy.logrotate: logrotate configuration for Metaproxy
	* metaproxy-apache.logrotate: logrotate configuration for Metaproxy’s Apache virtual host
	* metaproxy-vhost.conf: Apache virtual host configuration
	* create-explains.py: script to create explain responsed from the »SUB.xml« configuration; uses the »xsl/zoom-to-explains.xsl« and »explains-to-srufilter.xsl« stylesheets
* xsl: stylesheets used by the configuration
	* dc-cleaner.xsl, marcxml-cleaner.xsl: clean up DC and MARC output
	* marcxml-sort.xsl: Sort MARC fields in ascending order
	* indent.xsl
	* solr-to-dc.xsl: Create DC tags for solr fields named »dc:…«
	* url-encode.xsl: Percent escapes characters
	* MarcXML2TurboMarc.xsl
	* iso-639-2-to-639-2b.xsl: language code conversion
	* MODS3-4_MARC21slim_XSLT1-0.xsl, MODS3-4_DC_XSLT1-0.xsl, MARC21slimUtils.xsl, DC2MARC21slim.xsl: stylesheets from loc.gov
	* explains-to-srufilter.xsl zoom-to-explains.xsl: Stylesheets used by »config/create-explains.py«



## submodules
[Index Data](http://www.indexdata.com/) libraries and code to build metaproxy:
* yaz: [yaz library](http://www.indexdata.com/yaz)
* yazpp: [yaz++ C++ API for yaz](http://www.indexdata.com/yazpp)
* metaproxy [Metaproxy software](http://www.indexdata.com/metaproxy)
